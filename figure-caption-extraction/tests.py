# from src.ingestion.pubtator_fetcher import fetch_entities_pubtator, fetch_entities_from_text

# # entities = fetch_entities_pubtator("PMC8719639")
# # print(entities)
# text = "Success rates of first-in-human (FIH) studies to approval, Pfizer versus industry, 2016âQ3 2021. (a) Cumulative success rates of FIH (defined as Phase I) through Approval. Cumulative FIH to Approval success rate was calculated as the product of Phase I, Phase II, Phase III, and Approval success rates. For both Pfizer success rate and industry benchmarks, a 3-year rolling cohort was used for Phase I and 5-year rolling cohorts for subsequent phases (e.g., 5-year rolling cohort of 2019 represents the 2015â2019 5-year rolling average). The success rate of a specific phase was defined as the percentage of new molecular entities (NMEs) successfully transitioning from that phase to start of the next phase (or registration in the case of Phase III) divided by the total number of outcomes in that phase in any given year. Peer benchmarks were calculated using a similar methodology. The 2021-as-of-end-of-Q3 data point represents either the 3-year rolling average from October 1, 2018 through September 30, 2021 for Phase I outcomes, or the 5-year rolling average from October 1, 2016 through September 30, 2021 for outcomes of later phases. (b) Success rates of Phase I NMEs. The Phase I success rate was defined as transition from Phase I to Phase II and calculated using 3-year rolling averages. Sample sizes for Phase I were: NÂ =Â 36 (2016), NÂ =Â 40 (2017), NÂ =Â 42 (2018), NÂ =Â 36 (2019), NÂ =Â 25 (2020), and NÂ =Â 23 (2021 as of end of Q3). (c) Success rates of Phase II NMEs. The Phase II success rate was defined as transition from Phase II to Phase III and calculated using 5-year rolling averages. Sample sizes for Phase II were: NÂ =Â 34 (2016), NÂ =Â 34 (2017), NÂ =Â 32 (2018), NÂ =Â 33 (2019), NÂ =Â 25 (2020), NÂ =Â 25 (2021 as of end of Q3). (d) Cumulative success rates of Phase III and Approval NMEs. Cumulative success rate of Phase III and Approval NMEs was calculated as the product of Phase III and Approval success rates. The Phase III success rate was defined as the transition from Phase III to first regulatory submission in a major market. Approval success rate was defined as the transition from registration to Approval. All were calculated using 5-year rolling averages. Sample sizes for Phase III were: NÂ =Â 9 (2016), NÂ =Â 8 (2017), NÂ =Â 9 (2018), NÂ =Â 9 (2019), NÂ =Â 13 (2020), NÂ =Â 12 (2021 as of end of Q3); and for registration were: NÂ =Â 7 (2016), NÂ =Â 6 (2017), NÂ =Â 9 (2018), NÂ =Â 8 (2019), NÂ =Â 8 (2020), NÂ =Â 10 (2021 as of end of Q3). To declare success at each stage, the program needed to meet both technical and strategic thresholds. The latter was met, wherever feasible, when the overall efficacy/safety profile was superior to the most relevant standard of care (a higher bar than placebo). Specifically, for declaration of proof of concept (POC), which often coincides with the conclusion of Phase II studies, the program needed to meet criteria for starting Phase III development, including the potential of breakthrough value to patients, filling unmet needs, as well as assessment of commercial value, competitive landscape, resources required, and risks."
# entities = fetch_entities_from_text(text)
# print(entities)
import requests
from typing import Optional, Dict, Any, List
from xml.etree import ElementTree as ET
from src.models.FigureData import FigureData
from src.models.PaperData import PaperData
from src.ingestion.entity_fetcher import extract_entities_pubtator3
from src.utils.logger import get_logger
from src.config.config_loader import load_config
from src.ingestion.pmcid_to_pmid import pmcid_to_pmid
from src.ingestion.bioc_fetcher import extract_title, fetch_paper, extract_abstract

print(fetch_paper("PMC8719639"))